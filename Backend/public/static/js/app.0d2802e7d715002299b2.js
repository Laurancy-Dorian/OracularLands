webpackJsonp([1],{0:function(t,e){},"0Naw":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("mvHQ"),n=s.n(a),r=s("//Fk"),o=s.n(r),i=s("NYxO"),l=s("7+uW");l.a.use(i.a);var u={token:localStorage.getItem("user-token")||"",status:""},c={auth_request:function(t,e){var s=t.commit;t.dispatch;return new o.a(function(t,a){s("AUTH_REQUEST"),l.a.http.post("auth",e).then(function(e){var a=e.data.token;localStorage.setItem("user-token",a),localStorage.setItem("user",n()(e.data.user)),l.a.http.headers.common.Authorization="Bearer "+a,s("AUTH_SUCCESS",a),t(e)}).catch(function(t){s("AUTH_ERROR",t),localStorage.removeItem("user-token"),localStorage.removeItem("user"),a(t)})})},auth_logout:function(t){var e=t.commit;t.dispatch;return new o.a(function(t,s){e("AUTH_LOGOUT"),localStorage.removeItem("user-token"),localStorage.removeItem("user"),delete l.a.http.headers.common.Authorization,t()})}};e.default=new i.a.Store({state:u,getters:{isAuthenticated:function(t){return!!t.token},authStatus:function(t){return t.status}},actions:c,mutations:{AUTH_REQUEST:function(t){t.status="loading"},AUTH_SUCCESS:function(t,e){t.status="success",t.token=e},AUTH_ERROR:function(t){t.status="error"},AUTH_LOGOUT:function(t,e){t.status="loggedout",t.token=null}}})},"4hca":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("Folders")])},staticRenderFns:[]},n=s("VU/8")({},a,!1,null,null,null);e.default=n.exports},Ix7Z:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("Users Details")])},staticRenderFns:[]},n=s("VU/8")({},a,!1,null,null,null);e.default=n.exports},KoTh:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("0Naw"),n={data:function(){return{pseudo_user:"",password_user:"",loading:!1,message_alert:""}},computed:{login_disabled:function(){return!this.pseudo_user||!this.password_user}},mounted:function(){var t=this;this.watch_store=a.default.watch(function(){"loading"==a.default.getters.authStatus?t.$emit("loading-on"):t.$emit("loading-off")})},methods:{sendLogin:function(){var t=this,e={pseudo_user:this.pseudo_user,password_user:this.password_user};a.default.dispatch("auth_request",e).then(function(e){t.$router.push("account")},function(e){"40006"==e.body.errors[0].code?t.message_alert="Pseudo invalide":"40007"==e.body.errors[0].code?t.message_alert="Mot de passe invalide":t.message_alert=e.body.errors[0].message})},resetMessageAlert:function(){this.message_alert=""}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",attrs:{id:"auth"}},[s("div",{staticClass:"row justify-content-md-center"},[t.message_alert?s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v("\n      "+t._s(t.message_alert)+"\n    ")]):t._e()]),t._v(" "),s("div",{staticClass:"row centered-screen"},[s("div",{staticClass:"col-12 mx-auto tm-login-col"},[s("div",{staticClass:"tm-bg-primary-dark tm-block tm-block-h-auto"},[s("div",{staticClass:"row mt-2"},[s("div",{staticClass:"col-12"},[s("form",{staticClass:"text-center tm-login-form form-signin",attrs:{method:"post"},on:{change:t.resetMessageAlert}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"username"}},[t._v("Pseudo")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model:value",value:t.pseudo_user,expression:"pseudo_user",arg:"value"}],staticClass:"form-control validate",attrs:{name:"username",type:"text",id:"username",required:""},domProps:{value:t.pseudo_user},on:{input:function(e){e.target.composing||(t.pseudo_user=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group mt-3"},[s("label",{attrs:{for:"password"}},[t._v("Mot de passe")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model:value",value:t.password_user,expression:"password_user",arg:"value"}],staticClass:"form-control validate",attrs:{name:"password",type:"password",id:"password",required:""},domProps:{value:t.password_user},on:{input:function(e){e.target.composing||(t.password_user=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group mt-4"},[s("button",{staticClass:"btn btn-primary btn-block text-uppercase",attrs:{disabled:t.login_disabled},on:{click:function(e){return e.preventDefault(),t.sendLogin(e)}}},[t._v("\n                  Connexion\n                ")])])]),t._v(" "),s("router-link",{staticClass:"mt-5 btn btn-primary btn-block text-uppercase",attrs:{to:"/forgot-password"}},[t._v("\n              Mot de passe oublié ?\n            ")])],1)])])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 mx-auto tm-login-col"},[s("router-link",{staticClass:"mt-5 btn btn-primary btn-block text-uppercase",attrs:{to:"/users/new"}},[t._v("\n        Inscription\n      ")])],1)])])},staticRenderFns:[]},o=s("VU/8")(n,r,!1,null,null,null);e.default=o.exports},M93x:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("0Naw"),n={data:function(){return{active:0}},computed:{user_connected:function(){return a.default.getters.isAuthenticated},pseudo_user:function(){return JSON.parse(localStorage.getItem("user")).pseudo_user},id_user:function(){return JSON.parse(localStorage.getItem("user")).id_user}},methods:{signout:function(){var t=this;a.default.dispatch("auth_logout").then(function(){t.$router.push("/")})}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"navbar navbar-expand-xl"},[s("div",{staticClass:"container h-100"},[s("router-link",{staticClass:"navbar-brand",attrs:{to:"/",id:"title-website"}},[s("h1",{staticClass:"tm-site-title mb-0"},[t._v("Oracular   Lands")])]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[s("ul",{staticClass:"navbar-nav mx-auto h-100"},[t.user_connected?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"SessionsPlaying"}}},[s("i",{staticClass:"fas fa-dice"}),t._v("\n            Sessions\n          ")])],1):t._e(),t._v(" "),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"StoryArcs"}}},[s("i",{staticClass:"fas fa-book"}),t._v("\n            Arcs Narratifs\n          ")])],1),t._v(" "),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"Users"}}},[s("i",{staticClass:"fas fa-users"}),t._v("\n            Utilisateurs\n          ")])],1),t._v(" "),t.user_connected?s("li",{staticClass:"nav-item dropdown"},[t._m(1),t._v(" "),s("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdown"}},[s("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"StoryArcsByUser",params:{id_user:t.id_user}}}},[s("i",{staticClass:"fas fa-book"}),s("span",[t._v("Arcs Narratifs")])]),t._v(" "),s("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"Sessions"}}},[s("i",{staticClass:"fas fa-dice"}),s("span",[t._v("Sessions")])]),t._v(" "),s("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"Folders"}}},[s("i",{staticClass:"fas fa-folder-open"}),s("span",[t._v("Documents")])])],1)]):t._e()]),t._v(" "),s("ul",{staticClass:"navbar-nav mx-auto h-100"},[t.user_connected?s("li",{staticClass:"nav-item dropdown",attrs:{role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[s("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#"}},[s("i",{staticClass:"far fa-user"}),t._v(" "),s("div",[s("span",[t._v(t._s(t.pseudo_user))]),t._v(" "),s("i",{staticClass:"fas fa-angle-down"})])]),t._v(" "),s("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdown"}},[s("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"Account"}}},[s("i",{staticClass:"fa fa-cog"}),s("span",[t._v("Profil")])]),t._v(" "),s("a",{staticClass:"dropdown-item",on:{click:t.signout}},[s("i",{staticClass:"fas fa-sign-out-alt"}),s("span",[t._v("Déconnexion")])])],1)]):t._e(),t._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:!t.user_connected,expression:"!user_connected"}],staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"Login"}}},[s("i",{staticClass:"far fa-user"}),t._v(" "),s("span",[t._v("Se connecter")])])],1)])])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"navbar-toggler ml-auto mr-0",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("i",{staticClass:"fa fa-bars tm-nav-icon"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("i",{staticClass:"fas fa-dice-d20"}),this._v(" "),e("div",[e("span",[this._v("Espace MJ")]),this._v(" "),e("i",{staticClass:"fas fa-angle-down"})])])}]},o={components:{Menu:s("VU/8")(n,r,!1,null,null,null).exports},name:"App",data:function(){return{loading:!1}},methods:{startLoadingAnimation:function(){this.loading=!0},endLoadingAnimation:function(){this.loading=!1}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[t.loading?s("div",{staticClass:"loading"},[t._v("Loading…")]):t._e(),t._v(" "),s("div",{staticClass:"main",attrs:{id:"main"}},[s("Menu"),t._v(" "),s("router-view",{on:{"loading-on":t.startLoadingAnimation,"loading-off":t.endLoadingAnimation}})],1),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"tm-footer row tm-mt-small",attrs:{id:"footer"}},[e("div",{staticClass:"col-12 font-weight-light"},[e("p",{staticClass:"text-center text-white mb-0 px-4 small"})])])}]},l=s("VU/8")(o,i,!1,null,null,null);e.default=l.exports},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),n=s("/ocq"),r=s("0Naw"),o=function(t,e,s){r.default.getters.isAuthenticated?s("/account"):s()},i=function(t,e,s){r.default.getters.isAuthenticated?s():s("/auth")};a.a.use(n.a);var l=new n.a({mode:"history",routes:[{path:"/auth",name:"Login",component:s("KoTh").default,beforeEnter:o},{path:"/users/new",name:"Register",component:s("uuoo").default,beforeEnter:o},{path:"/account",name:"Account",component:s("Ix7Z").default,beforeEnter:i},{path:"/story-arcs",name:"StoryArcs",component:s("d4MR").default,alias:""},{path:"/story-arcs/:id(\\d+)",name:"StoryArcsDetails",component:s("SHJP").default},{path:"/users/:id_user(\\d+)/story-arcs",name:"StoryArcsByUser",component:s("SHJP").default},{path:"/users",name:"Users",component:s("NhnZ").default},{path:"/users/:id(\\d+)",name:"UsersDetails",component:s("Ix7Z").default,beforeEnter:i},{path:"/sessions-playing",name:"SessionsPlaying",component:s("eqV1").default,beforeEnter:i},{path:"/sessions",name:"Sessions",component:s("eqV1").default,beforeEnter:i},{path:"/folders",name:"Folders",component:s("4hca").default,beforeEnter:i},{path:"*",redirect:"/"}]}),u=s("8+8L"),c=this;a.a.config.productionTip=!0,a.a.use(l),a.a.use(u.a),a.a.http.options.root="http://localhost:3000",a.a.http.headers.common["Access-Control-Allow-Origin"]="*",a.a.http.headers.common["Access-Control-Allow-Headers"]="Access-Control-Allow-Methods, Access-Control-Allow-Origin, Origin, Accept, Content-Type",a.a.http.interceptors.push(function(t,e){t.headers.set("oracular-lands-data","true")}),a.a.http.interceptors.push(function(t,e){e(function(t){401==t.status&&p.dispatch(AUTH_LOGOUT)})}),a.a.http.interceptors.push(function(t,e){e(function(e){t.after&&t.after.call(c,e)})});var d=localStorage.getItem("user-token");d&&(a.a.http.headers.common.Authorization="Bearer "+d);var p=s("0Naw").default,f=s("M93x").default;new a.a({el:"#app",router:l,components:{App:f},template:"<App/>"})},NhnZ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("Users")])},staticRenderFns:[]},n=s("VU/8")({},a,!1,null,null,null);e.default=n.exports},SHJP:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("Story Arcs")])},staticRenderFns:[]},n=s("VU/8")({},a,!1,null,null,null);e.default=n.exports},d4MR:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("Story Arcs")])},staticRenderFns:[]},n=s("VU/8")({},a,!1,null,null,null);e.default=n.exports},eqV1:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("Sessions Playing")])},staticRenderFns:[]},n=s("VU/8")({},a,!1,null,null,null);e.default=n.exports},uuoo:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v(" Register")])},staticRenderFns:[]},n=s("VU/8")({},a,!1,null,null,null);e.default=n.exports}},["NHnr"]);
//# sourceMappingURL=app.0d2802e7d715002299b2.js.map